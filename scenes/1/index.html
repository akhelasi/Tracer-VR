<!DOCTYPE html>
<html>

<head>
  <!-- Load A-Frame version 1.5.0 for non-iOS devices -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://aframe.io/releases/1.5.0/aframe-mobile.min.js"></script>
  <script src="https://unpkg.com/aframe-physics-system@1.5.0/dist/aframe-physics-system.min.js"></script>

  <script>
    // Function to detect if the user agent is iOS
    function isIOS() {
      return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    }

    // Load A-Frame version 1.2.0 for iOS devices
    if (isIOS()) {
      document.write('<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>');
      document.write('<script src="https://aframe.io/releases/1.2.0/aframe-mobile.min.js"></script>');
    }
  </script>
</head>

<body>
  <a-scene>

    <a-entity id="rig" position="0 5 0">
      <a-entity id="camera" camera="active: true" look-controls></a-entity>
    </a-entity>

    <!-- Set the background color of the scene to black -->
    <a-sky color="#000000"></a-sky>
    <a-assets>
      <a-asset-item id="pixel" src="../vr-cavern.glb"></a-asset-item>
    </a-assets>

    <!-- Include your 3D model -->
    <a-entity gltf-model="#pixel"></a-entity>
  </a-scene>

  <script>
    // Get the camera entity
    const cam = document.getElementById('rig');

    let q = 0;
    let r = 10;

    // Animation loop
    function animate() {
      q += 0.01;

      let qSin = Math.sin(q);
      let qCos = Math.cos(q);

      let scaledCos = r * qCos;
      let scaledSin = r * qSin;

      // Set the position of the camera entity
      cam.setAttribute('position', `${scaledCos} 5 ${scaledSin}`);

      // Call the animation loop recursively
      requestAnimationFrame(animate);
    }

    // Start the animation loop
    animate();
  </script>
</body>

</html>
